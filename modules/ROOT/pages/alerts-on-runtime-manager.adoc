= Alerts
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]



image:logo-cloud-active.png[link="/runtime-manager/deployment-strategies#cloudhub", title="CloudHub"]
image:logo-hybrid-active.png[link="/runtime-manager/deployment-strategies#hybrid", title="Hybrid"]
image:logo-server-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-platform-private-cloud-edition", title="Anypoint Platform PCE"]
image:logo-rtf-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-runtime-fabric", title="Runtime Fabric"]


You to set up alerts to send an email notification when specific application or server events occur. 

Runtime Manager includes several standard alert types that trigger notifications for common events:

* An application exceeds a specific number of events processed within a time period.
* A deployment completes with success or failure.
* CloudHub encounters a problem with the worker on an application via the worker monitoring system.
* A server is disconnected or deleted.

You can also create custom alerts for applications deployed to CloudHub.
Custom alerts are triggered by notifications that your application sends to the Runtime Manager console
using Anypoint Connector for CloudHub.
See xref:custom-application-alerts.adoc[Custom Application Alerts] for more information.

== Rate Limits on Alerts

Anypoint Platform enforces rate limits that determine how often an alert is triggered.
These limits prevent excessive emails from being sent.
The rate limit is determined by several factors, including:

* CloudHub
+
When using CloudHub Connector to trigger notifications and alerts,
the limit is five custom application alerts per IP address, per second.
If an application uses multiple workers, this limit is multiplied by the number of workers
assigned to the application, because the limitation is enforced per IP address.
+
Custom notifications that trigger emails are also subject to the rate limit on email notifications.
* Alert emails
+
For both standard and custom alerts, the rate limit is one alert notification email sent every 2.5 seconds.
This limit is enforced by a combination of organization, environment, alert (name/ID), and resource (application, server, server group, or cluster).

== Create an Alert

To create an alert:

. In Runtime Manager, click *Alerts* in the left navigation pane.
+
** If no alerts are set up yet, you see:
+
.The arrow shows the *Create your first alert* option.
image::alerts-no-alerts.png[Alerts page with no alerts set up]
** If your account already has associated alerts, you see:
+
.The arrow shows the blue plus (*+*) icon in the *Alerts* page.
image::alerts-create-additional-alert.png[Alerts page with blue plus (+) icon]

. Click the blue plus (*+*) icon to create an alert.
+
image::alerts-create-alert.png[Create an Alert page]

. Fill in the required fields:

* *Name*
+
Unique and meaningful name for the alert
* *Severity Level*
+
The severity level for the alert: critical, warning, or info

* *Source*
+
The source of the alert: applications or servers
+
This field appears only if your Anypoint Platform account supports local servers.
* *Application type* 
+
When the source is *Applications*, applications deployed to either CloudHub or local servers
+
You can't create an alert that applies to both applications deployed to CloudHub and to local servers.
You must create separate alerts for each type.
+
* *Server type*
+
When the source is *Servers*, the type of server: single server, server group, or cluster.
+
If your servers aren't available on your menu, see xref:managing-servers.adoc[Servers, Server Groups, and Clusters].
* *Applications* or *Servers*
+
The application or server to apply the alert to
* *Condition*
+
The condition that triggers the alert
+
The available options depend on whether your alert is linked to a server,
an application running on CloudHub, or an application running locally.
Some conditions require additional data.
See <<Alert Conditions>>.
* *Subject*
+
Subject of the alert email to send when the alert is triggered.
+
The subject can include variables.
See <<Alert Properties>>.
* *Message*
+
The body text for the email to send when the alert is triggered.
The message body can include variables.
See <<Alert Properties>>.
* *Recipients*
+
The recipients of the alert email
+
You can select platform users or enter any email address.

. Click *Create Alert*.

When an event that meets an alert condition occurs, an email like the following is sent:

image::alerts-alert-email.png[Anypoint Platform Alert Notification email]


== Alert Conditions

You can select different conditions depending on the alert source.
Some conditions are simple success or failure notifications such as `Deployment success`.
Some more complex conditions require that you define parameters that appear as new fields in the form.

=== Conditions for Applications Deployed to CloudHub 

image:logo-cloud-active.png[link="/runtime-manager/deployment-strategies#cloudhub", title="CloudHub"]
image:logo-hybrid-disabled.png[link="/runtime-manager/deployment-strategies#hybrid", title="Hybrid"]
image:logo-server-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-platform-private-cloud-edition", title="Anypoint Platform PCE"]
image:logo-rtf-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-runtime-fabric", title="Runtime Fabric"]

For applications deployed to CloudHub, the following alert conditions apply:

CPU usage - Cloudhub::
+
--
CPU usage of the CloudHub workers that run the application

image::alerts-conditions-apps-cpu.png[CPU usage - Cloudhub]

To enable this condition, you must specify capacity threshold and duration that triggers the alert.
--

Custom application alert::
+
--
Send alerts when a custom notification contains the specified text

image::alerts-conditions-custom.png[Custom application alerts]

To enable this condition, you must specify the notifications that are the output of CloudHub Connector
in your Mule application.
When the text in one of the notifications matches or contains the string that you provide in the *Contains* field, an alert is sent.
See xref:custom-application-alerts.adoc[Custom Application Alerts] for more information.
--

Exceeds event traffic threshold::
+
--
image::alerts-conditions-exceeds-traffic.png[Exceeds event traffic threshold]

To enable this condition, specify the capacity threshold and duration that triggers the alert.
This threshold applies to all events of any type.
If during a certain period you get more than N events, you get an alert.
The meaning of this depends on the events you are tracking on your application.
For more information on event tracking, see xref:mule-runtime::business-events.adoc[Business Events].
--

Memory usage - Cloudhub::
+
--
Percentage of total memory allocated to the CloudHub workers that run the application, including the memory consumed by the JVM itself

image::alerts-conditions-apps-memory.png[Memory usage - Cloudhub]

To enable this condition, you must specify the capacity threshold and duration that triggers the alert.
--



The following alerts for applications deployed to CloudHub require no additional parameters:

* Deployment failed
* Deployment success
* Secure data gateway connected
* Secure data gateway disconnected
* Worker not responding


=== Conditions for Applications Deployed to Local Servers 

image:logo-cloud-disabled.png[link="/runtime-manager/deployment-strategies#cloudhub", title="CloudHub"]
image:logo-hybrid-active.png[link="/runtime-manager/deployment-strategies#hybrid", title="Hybrid"]
image:logo-server-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-platform-private-cloud-edition", title="Anypoint Platform PCE"]
image:logo-rtf-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-runtime-fabric", title="Runtime Fabric"]

For applications deployed to local servers, the following alert conditions apply:

Number of errors::
+
--
image::alerts-conditions-number-errors.png[Number of errors]

You must provide the number of errors that triggers the alert.
The time unit is per minute. An alarm is triggered when the error count goes over the threshold number in the timeslot of one minute.
--

Number of Mule messages::
+
--
image::alerts-conditions-number-mule-messages.png[Number of Mule messages]

You must provide the number of Mule messages, since the application was started, that trigger the alert.
--

Response time::
+
--
image::alerts-conditions-response-time.png[Response time]

You must provide the maximum accepted response time--anything over this value triggers the alert.
--


The following alerts for applications deployed to local servers require no additional parameters:

* Application undeployed
* Deployment failure
* Deployment success


=== Conditions for Local Servers

image:logo-cloud-disabled.png[link="/runtime-manager/deployment-strategies#cloudhub", title="CloudHub"]
image:logo-hybrid-active.png[link="/runtime-manager/deployment-strategies#hybrid", title="Hybrid"]
image:logo-server-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-platform-private-cloud-edition", title="Anypoint Platform PCE"]
image:logo-rtf-disabled.png[link="/runtime-manager/deployment-strategies#anypoint-runtime-fabric", title="Runtime Fabric"]

The available alert events depends on server type.
The following alerts are available on all target types (servers, server groups, and clusters):


Server CPU usage::
+
--
CPU usage of the servers.

image::alerts-conditions-servers-cpu.png[Server CPU usage alert condition]

To enable this condition, specify values in the duration and capacity threshold parameters that, when crossed, trigger the alert.
--

Server Load average::
+
--
Average processing for a given time period.

image::alerts-conditions-servers-load-avg.png[Server load average alert condition]

[NOTE]
Windows environments donâ€™t provide this information, so this metric isn't available on Windows environments.
--

Server Memory usage::
+
--
Total memory usage in MB on the server.

image::alerts-conditions-servers-memory.png[Server memory usage alert condition]

To enable this condition, specify values in the duration and capacity threshold parameters that, when crossed, trigger the alert.
--

Server Thread count::
+
--
Number of threads on the JVM.

image::alerts-conditions-servers-thread-count.png[Server thread count alert condition]
--

The following alerts vary according to the target type (server, server groups, or clusters),
and require no additional parameters:

Servers::
+
--
* *Agent version changed*
* *Runtime version changed*
* *Server connected*
* *Server deleted*
* *Server disconnected*
--

Server Groups::
+
--
* *Server Group connected*
* *Server Group deleted*
* *Server Group disconnected*
* *Server Group's node connected*
* *Server Group's node disconnected*
* *Server added to Server Group*
* *Server removed from Server Group*
--

Clusters::
+
--

* *Cluster connected*
* *Cluster deleted*
* *Cluster disconnected*
* *Cluster presents visibility issues*
* *Cluster's node connected*
* *Cluster's node disconnected*
* *Server added to Cluster*
* *Server removed from Cluster*
--


== Alert Properties

You can use the following properties in the alert email *Subject* and *Message* fields:

[%header%autowidth.spread]
|===
|Variable |Description |Applicable Alerts

|`${app}` |Name of the application triggering the alert. |All app alerts
|`${currentValue}` |Current value of metric that triggers the alert |Conditional
|`${message}` |Message from the notification triggering the alert. |Custom Application Notification
|`${name}` |Name of the target (server, server group, or cluster) triggering the alert. |All server alerts
|`${period}` |Timeframe over which to measure |Conditional
|`${periodTimeUnit}` |Period time unit |Conditional
|`${operator}` | An operator, such as: < > = |Conditional
|`${priority}` |Priority of the notification triggering the alert. |Custom Application Notification
|`${resource}` | Name of the resource triggering the alert, such as server or app. | All
|`${severity}` | Severity of the alert. |All
|`${state}` | State of the resource triggering the alert, such as Running or Disconnected. | All
|`${threshold}` |Count over timeframe which triggers the alert |Conditional
|`${value}` | A value associated with an element | Conditional

|===

== Access Alerts

You can access alerts in Runtime Manager in several ways.

To display all the alerts associated with your account, click *Alerts* in the left navigation pane:

.The arrow shows the *Alerts* menu.
image::alerts-view-all-alerts-tab.png[Alerts menu]

From this page you can:

* Search for a string in an alert name.
* Filter the displayed alerts by source, condition, severity, or status.
* Click an alert name to change its settings.
* Select an alert to display its status, settings, and history in the details pane:
+
.The arrow shows the alert history in the details pane.
image::alerts-history.png[Alert history in the details pane]

To display the alerts associated with an application or server:

. In the *Applications* or *Servers* list, click the *Status* column for the application or server.
. Click the *View Associated Alerts* link in the details pane:
+
.The arrow shows the *View Associated Alerts* link in the details pane.
image::alerts-view-details-pane.png[View Associated Alerts link in the details pane]


To display the alert history for an application or server:

. In the *Applications* or *Servers* list, click the application or server name.
. Click *Settings* in the left navigation pane.
. Click the *Alerts History* tab:
+
.The arrow shows the *Alerts History* tab on the *Settings* page.
image::alerts-settings-alerts-history-tab.png[Alerts History tab on the Settings page]



== Manage Alerts

To manage alerts from the *Alerts* page, select one or more alerts in the list 
and select an action in the details pane:

.The screenshot shows (*1*) the select toggle, (*2*) the alert state switch, (*3*) the *Duplicate* icon, and (*4*) the *Delete* icon.
image::alerts-multi-select-manage.png[Select toggle, alert state switch, Duplicate icon, and Delete icon]


Switch an alert on or off::
+
--
All users of Anypoint Platform, even those without permissions to create alerts,
can control whether email alerts are sent by switching an alert on or off.

When you change the state of an alert, the change is applied for all users who 
receive email notifications for that alert.

* To turn alerts off, click the toggle switch:
+
.The arrow shows the alert switch on.
image::alerts-switch-on.png[Alert switch on]
+
The value in the *Active* column changes from *Yes* to *No*.

* To turn alerts on, click the toggle switch:
+
.The arrow shows the alert switch off.
image::alerts-switch-off.png[Alert switch off]
+
The value in the *Active* column changes from *No* to *Yes*.
--

Create a copy of an alert::
+
--
Select one or more alerts and click the *Duplicate* icon in the details pane:

.The arrow shows the *Duplicate* alert icon.
image::alerts-duplicate.png[Duplicate alert icon]

Runtime Manager creates a copy of the alert with `-copy` appended to the name of the original alert.
--

Delete an alert::
+
--
Select one or more alerts and click the *Delete* (trash can) icon in the details pane:

.The arrow shows the *Delete* alert (trash can) icon.
image::alerts-delete.png[Delete (trash can) icon]

When prompted, click *OK* to confirm deletion.
--

== See Also

* xref:custom-application-alerts.adoc[Custom Application Alerts]
* xref:monitoring-dashboards.adoc[Monitoring Dashboards]
* xref:monitoring.adoc[Monitoring Applications]
